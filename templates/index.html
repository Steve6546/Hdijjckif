<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>نظام الوكلاء الذكي المتكامل 3.0</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.rtl.min.css">
    <link rel="stylesheet" href="/static/style.css">
</head>
<body>
    <div class="container-fluid mt-3">
        <div class="row">
            <div class="col-12 text-center mb-3">
                <h1 class="main-title">نظام الوكلاء الذكي المتكامل 3.0</h1>
                <p class="lead">منصة متكاملة للذكاء الاصطناعي مع دعم للغة العربية</p>
                <div class="d-flex justify-content-center gap-2">
                    <a href="/openrouter" class="btn btn-outline-primary">شرح استخدام OpenRouter</a>
                    <a href="#" class="btn btn-outline-success" id="modelSelector">تغيير النموذج</a>
                    <a href="#" class="btn btn-outline-info" id="createProject">إنشاء مشروع جديد</a>
                </div>
            </div>
        </div>

        <div class="row">
            <!-- Left Sidebar - Analytical Agents -->
            <div class="col-md-2 agents-sidebar left-agents">
                <h5 class="text-center mb-3">الوكلاء التحليليون</h5>
                <div class="list-group">
                    <button class="list-group-item list-group-item-action agent-btn" data-agent="image">
                        <i class="bi bi-image"></i> وكيل الصور
                    </button>
                    <button class="list-group-item list-group-item-action agent-btn" data-agent="analysis">
                        <i class="bi bi-graph-up"></i> وكيل التحليل
                    </button>
                    <button class="list-group-item list-group-item-action agent-btn" data-agent="nlp">
                        <i class="bi bi-translate"></i> وكيل اللغة
                    </button>
                </div>
            </div>

            <!-- Main Chat Area -->
            <div class="col-md-8">
                <div class="chat-container">
                    <div class="chat-messages" id="chatMessages">
                        <!-- Messages will be added here dynamically -->
                        <div class="message system-message">
                            <div class="message-content">
                                مرحباً بك في نظام الوكلاء الذكي المتكامل 3.0. كيف يمكنني مساعدتك اليوم؟
                            </div>
                        </div>
                    </div>
                    
                    <div class="chat-input-container">
                        <form id="messageForm" class="d-flex">
                            <input type="text" id="messageInput" class="form-control" placeholder="اكتب رسالتك هنا..." autocomplete="off">
                            <button type="submit" class="btn btn-primary ms-2">إرسال</button>
                            <button type="button" class="btn btn-outline-secondary ms-2" id="uploadButton">
                                <i class="bi bi-upload"></i>
                            </button>
                        </form>
                        <input type="file" id="fileInput" style="display: none">
                    </div>
                </div>

                <!-- Project Preview Area -->
                <div class="project-preview mt-4" id="projectPreview" style="display: none;">
                    <div class="card">
                        <div class="card-header d-flex justify-content-between align-items-center">
                            <h5 class="mb-0">معاينة المشروع: <span id="projectName">اسم المشروع</span></h5>
                            <div>
                                <button class="btn btn-sm btn-primary" id="runProject">تشغيل</button>
                                <button class="btn btn-sm btn-secondary" id="stopProject">إيقاف</button>
                                <button class="btn btn-sm btn-danger" id="closePreview">إغلاق</button>
                            </div>
                        </div>
                        <div class="card-body">
                            <div class="row">
                                <div class="col-md-4">
                                    <div class="project-files">
                                        <h6>ملفات المشروع</h6>
                                        <div id="fileTree" class="file-tree">
                                            <!-- File tree will be added here dynamically -->
                                        </div>
                                    </div>
                                </div>
                                <div class="col-md-8">
                                    <div class="project-content">
                                        <ul class="nav nav-tabs" id="projectTabs">
                                            <li class="nav-item">
                                                <a class="nav-link active" data-bs-toggle="tab" href="#codeTab">الكود</a>
                                            </li>
                                            <li class="nav-item">
                                                <a class="nav-link" data-bs-toggle="tab" href="#previewTab">المعاينة</a>
                                            </li>
                                            <li class="nav-item">
                                                <a class="nav-link" data-bs-toggle="tab" href="#logsTab">السجلات</a>
                                            </li>
                                        </ul>
                                        <div class="tab-content mt-2">
                                            <div class="tab-pane fade show active" id="codeTab">
                                                <pre id="codeDisplay" class="code-display">// اختر ملفًا من شجرة الملفات لعرض الكود</pre>
                                            </div>
                                            <div class="tab-pane fade" id="previewTab">
                                                <iframe id="previewFrame" class="preview-frame"></iframe>
                                            </div>
                                            <div class="tab-pane fade" id="logsTab">
                                                <pre id="logsDisplay" class="logs-display">// سجلات تشغيل المشروع ستظهر هنا</pre>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Right Sidebar - Executive Agents -->
            <div class="col-md-2 agents-sidebar right-agents">
                <h5 class="text-center mb-3">الوكلاء التنفيذيون</h5>
                <div class="list-group">
                    <button class="list-group-item list-group-item-action agent-btn" data-agent="project">
                        <i class="bi bi-kanban"></i> وكيل المشاريع
                    </button>
                    <button class="list-group-item list-group-item-action agent-btn" data-agent="code">
                        <i class="bi bi-code-square"></i> وكيل البرمجة
                    </button>
                    <button class="list-group-item list-group-item-action agent-btn" data-agent="ai_engine">
                        <i class="bi bi-cpu"></i> محرك الذكاء
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Model Selection Modal -->
    <div class="modal fade" id="modelModal" tabindex="-1" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title">اختيار نموذج الذكاء الاصطناعي</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <div class="list-group" id="modelList">
                        <button class="list-group-item list-group-item-action active" data-model="google/gemini-2.5-pro-exp-03-25:free">
                            Google Gemini 2.5 Pro (مجاني)
                        </button>
                        <button class="list-group-item list-group-item-action" data-model="qwen/qwen2.5-vl-72b-instruct:free">
                            Qwen 2.5 VL 72B (مجاني، جيد للعربية)
                        </button>
                        <button class="list-group-item list-group-item-action" data-model="meta-llama/llama-3.3-70b-instruct:free">
                            Meta Llama 3.3 70B (مجاني)
                        </button>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">إلغاء</button>
                    <button type="button" class="btn btn-primary" id="selectModelBtn">اختيار</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Create Project Modal -->
    <div class="modal fade" id="createProjectModal" tabindex="-1" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title">إنشاء مشروع جديد</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <div class="mb-3">
                        <label for="projectNameInput" class="form-label">اسم المشروع</label>
                        <input type="text" class="form-control" id="projectNameInput" placeholder="أدخل اسم المشروع">
                    </div>
                    <div class="mb-3">
                        <label for="projectTypeSelect" class="form-label">نوع المشروع</label>
                        <select class="form-select" id="projectTypeSelect">
                            <option value="web">تطبيق ويب</option>
                            <option value="api">واجهة برمجة تطبيقات (API)</option>
                            <option value="mobile">تطبيق جوال</option>
                            <option value="desktop">تطبيق سطح المكتب</option>
                            <option value="cli">تطبيق سطر الأوامر</option>
                        </select>
                    </div>
                    <div class="mb-3">
                        <label for="projectDescriptionInput" class="form-label">وصف المشروع</label>
                        <textarea class="form-control" id="projectDescriptionInput" rows="3" placeholder="أدخل وصفًا للمشروع"></textarea>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">إلغاء</button>
                    <button type="button" class="btn btn-primary" id="createProjectBtn">إنشاء</button>
                </div>
            </div>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.0/font/bootstrap-icons.css"></script>
    <script src="/static/script.js"></script>
</body>
</html>